<template>
  <require from="./../value-converters/hiragana"></require>
  <require from="./kana"></require>

  <form class="form-horizontal" role="form" submit.delegate="GrammarService.query()">
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-8">
        <h3><kana word.bind="KanaService.word"></kana></h3>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="kana-word">JSL</label>
      <div class="col-sm-8">
        <input type="text" class="form-control" id="kana-word" autocomplete="off" tabindex="1" value.bind="word">
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="kana-type">Type</label>
      <div class="col-sm-2">
        <select class="form-control" id="kana-type" tabindex="2" value.bind="type">
          <option></option>
          <option value="ichidan">Ichidan</option>
          <option value="godan">Godan</option>
          <option value="adjectival">Adjectival</option>
          <option value="nominal">Nominal</option>
        </select>
      </div>
      <div class="col-sm-2 col-sm-offset-4">
        <select class="form-control" id="kana-alphabet" tabindex="-1" value.bind="KanaService.alphabet">
          <option value="hiragana">Hiragana</option>
          <option value="katakana">Katakana</option>
        </select>
      </div>
    </div>
    <div class="form-group" repeat.for="item of GrammarService.stack">
      <label class="control-label col-sm-2" if.bind="$first">Grammar</label>
      <div class="col-sm-2 ${$first ? '' : 'col-sm-offset-2'}">
        <select class="form-control" tabindex="${$index + 2}" value.bind="item.id">
          <option value=""></option>
          <option value="stem">Verb stem</option>
          <option value="distal">Distal form</option>
        </select>
      </div>
      <div class="col-sm-6" if.bind="item.hasResult">
        <h4><kana word.bind="item.result"></kana></h4>
      </div>
      <div class="col-sm-6" if.bind="item.hasError">
        <div class="alert alert-danger">${item.error}</div>
      </div>
      <div class="col-sm-2 col-sm-offset-4" if.bind="$last">
        <button type="submit" class="btn btn-default btn-block">Submit</button>
      </div>
    </div>
  </form>
</template>